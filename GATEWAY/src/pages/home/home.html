<ion-header>
  <ion-navbar align-title="center">
    <!-- Toggle left side menu -->
    <button ion-button icon-only menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>Tiles</ion-title>
  </ion-navbar>
  <ion-toolbar>
    <ion-title left style="padding-left: 0;">{{serverConnectStatusMsg}}
      <button right class="titleBttn" ion-button small color="positive" (click)="showConnectMQTTPopup()">CONNECT</button>
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-refresher (ionRefresh)="refreshDevices($event)">
    <ion-refresher-content
      pullingIcon="arrow-dropdown"
      pullingText="Pull to refresh"
      refreshingSpinner="circles"
      refreshingText="Refreshing...">
    </ion-refresher-content>
  </ion-refresher>
  <ion-item no-lines>{{statusMsg}}</ion-item>
  <ion-title left style="padding-left: 0;">PHYSICAL TILES</ion-title>
  <ion-list class="mainList">
    <ion-item class="devices" color="light" *ngFor="let device of devices">
      <div class="row row-center">
        <div id="devName" class="col col-75">
          <b>{{device.name}}</b><br><!--ID: {{device.tileId}}-->
        </div>
        <div class="col">
          <button class="bttn" ion-button small color="positive" (click)="bleService.connect(device)" [disabled]="device.loading" [hidden]="device.connected">CONNECT</button>
          <button class="bttn" ion-button small color="positive" id="disconnectButton" (click)="bleService.disconnect(device)" [hidden]="!device.connected">DISCONNECT</button>
          <!--button class="bttn" ion-button small color="positive" id="fetchEventMappingsButton" (click)="fetchEventMappings(device)" [hidden]="!device.connected">FETCHÂ EVT</button-->
        </div>
      </div>
      <ion-list [hidden]="!device.connected" no-lines>
        <div class="row row-center">
          <div class="col col-75">
            <!--ion-badge class="bttnRel" badge-stable [hidden]="device.buttonPressed">Button released</ion-badge>
            <ion-badge class="bttnRel" badge-balanced [hidden]="!device.buttonPressed">Button pressed</ion-badge-->
            <!--ion-item class="toggleIonItem" color="light">
              <ion-item class="toggleText" color="light" item-left>LED</ion-item>
              <ion-toggle class="tgle" item-left [(ngModel)]="device.ledOn" (ionChange)="bleService.sendData(device, 'led,on,red')"></ion-toggle>
            </ion-item-->
          </div>
          <div class="col">
            <button class="bttn" ion-button small color="positive" (click)="changeNamePop(device)">CHANGE NAME</button>
            <button class="bttn" ion-button small color="positive" (click)="devicesService.resetDeviceName(device)">RESET NAME</button>
          </div>
          <div class="col">
            <button class="bttn" ion-button small color="positive" (click)="identifyDevice(device)">FIND DEVICE</button>
          </div>
        </div>
      </ion-list>
    </ion-item>
    <ion-title left style="padding-left: 0;">VIRTUAL TILES</ion-title>
    <ion-item class="devices" color="light" *ngFor="let tile of virtualTiles">
      <div class="row row-center">
        <div id="devName" class="col col-75">
          <b>{{tile.virtualName}}</b><br>
        </div>
        <div class="col">
          <button class="bttn" ion-button small color="positive" (click)="pairTilePopUp(tile)" >PAIR</button>
        </div>
      </div>
    </ion-item>
  </ion-list>
</ion-content>

<!--
  TODO: move the code from the old www/index.html here.
  This might require changing some of it where the tags are updated
  or angular 1 is used.
-->
