<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <title>TILES Gateway - Unit test results</title>
    <style type="text/css">html,body{font-family:Arial,sans-serif;font-size:1rem;margin:0;padding:0;}body{padding:10px 40px;}h1{margin-bottom:0;}h2{margin-top:0;margin-bottom:0;color:#999;}table{width:100%;margin-top:20px;margin-bottom:20px;table-layout:fixed;}tr.header{background:#ddd;font-weight:bold;border-bottom:none;}td{padding:7px;border-top:none;border-left:1px black solid;border-bottom:1px black solid;border-right:none;word-break:break-all;word-wrap:break-word;}tr.pass td{color:#003b07;background:#86e191;}tr.skip td{color:#7d3a00;background:#ffd24a;}tr.fail td{color:#5e0e00;background:#ff9c8a;}tr:first-child td{border-top:1px black solid;}td:last-child{border-right:1px black solid;}tr.overview{font-weight:bold;color:#777;}tr.overview td{padding-bottom:0px;border-bottom:none;}tr.system-out td{color:#777;}tr.system-errors td{color:#f00;}hr{height:2px;margin:30px 0;background:#000;border:none;}section{margin-top:40px;}h3{margin:6px 0;}.overview{color:#333;font-weight:bold;}.system-out{margin:0.4rem 0;}.system-errors{color:#a94442}.spec{padding:0.8rem;margin:0.3rem 0;}.spec--pass{color:#3c763d;background-color:#dff0d8;border:1px solid #d6e9c6;}.spec--skip{color:#8a6d3b;background-color:#fcf8e3;border:1px solid #faebcc;}.spec--fail{color:#a94442;background-color:#f2dede;border:1px solid #ebccd1;}.spec--group{color:#636363;background-color:#f0f0f0;border:1px solid #e6e6e6;margin:0;}.spec--group:not(:first-of-type){margin:20px 0 0 0;}.spec__title{display:inline;}.spec__suite{display:inline;}.spec__descrip{font-weight:normal;}.spec__status{float:right;}.spec__log{padding-left: 2.3rem;}.hidden{display:none;}body.compact .spec p{margin-top:0;margin-bottom:0.5rem;}body.compact .spec,body.compact tr,body.compact .overview,body.compact .system-out,body.compact .system-errors{font-size:0.85rem;}body.compact .spec{padding:0.3rem 0.5rem;}body.compact section{margin-top:30px;}</style>
  </head>
  <body class="compact">
    <h1>TILES Gateway</h1>
    <h2>Unit test results</h2>
    <table cellspacing="0" cellpadding="0" border="0">
      <tr class="overview">
        <td colspan="3" title="Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/57.0.2987.133 Safari/537.36">Browser: Chrome 57.0.2987 (Windows 10 0.0.0)</td>
      </tr>
      <tr class="overview">
        <td colspan="3">Timestamp: 2017-05-04 13:47:19</td>
      </tr>
      <tr>
        <td colspan="3">
          75 tests / 
          0 errors / 
          0 failures / 
          0 skipped / 
          runtime: 2.562s
        </td>
      </tr>
      <tr class="header">
        <td>Status</td>
        <td>Spec</td>
        <td>Suite / Results</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.902s</td>
        <td>is created</td>
        <td>App Component</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.982s</td>
        <td>initialises with a root page of TabsPage</td>
        <td>App Component</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.025s</td>
        <td>should create an instance of the BleService</td>
        <td>bleService</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.024s</td>
        <td>should scan for BLE devices, and start a scanner that scans for new BLE devices</td>
        <td>bleService &raquo; startBLEScanner(): void</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.012s</td>
        <td>should unsubscribe bleScanner if defined</td>
        <td>bleService &raquo; stopBLEScanner(): void</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.016s</td>
        <td>should clear disconnected devices before scanning for new ble devices</td>
        <td>bleService &raquo; scanForDevices(): void</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.015s</td>
        <td>should check if BLE is enabled</td>
        <td>bleService &raquo; scanForDevices(): void</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.013s</td>
        <td>should invoke the method scanBLE() if BLE is enabled</td>
        <td>bleService &raquo; scanForDevices(): void</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.019s</td>
        <td>should try to enable BLE if method isEnabled throws an error</td>
        <td>bleService &raquo; scanForDevices(): void</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.013s</td>
        <td>should invoke method scanBLE() if it successfully enables BLE</td>
        <td>bleService &raquo; scanForDevices(): void</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.011s</td>
        <td>should present the error message if method enable() throws an error</td>
        <td>bleService &raquo; scanForDevices(): void</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.012s</td>
        <td>should run method startDeviceNotification if ble.connect returns no error</td>
        <td>bleService &raquo; connect(device: Device): void</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.011s</td>
        <td>should run method devicesService.clearDisconnectedDevices if ble.connect returns an error</td>
        <td>bleService &raquo; connect(device: Device): void</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.012s</td>
        <td>should run the method sendData if ble.connect returns no error</td>
        <td>bleService &raquo; locate(device: Device): void</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.02s</td>
        <td>should not run the method sendData if ble.connect returns an error</td>
        <td>bleService &raquo; locate(device: Device): void</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.015s</td>
        <td>should disconnect from the current device if it is paired</td>
        <td>bleService &raquo; disconnect(device: Device): void</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.016s</td>
        <td>should successfully send a dataString to a device using BLE</td>
        <td>bleService &raquo; sendData(device: Device, dataString: string): void</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.008s</td>
        <td>should run functions ble.scan and devicesService.convertBleDeviceToDevice</td>
        <td>bleService &raquo; scanBLE(): void</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.007s</td>
        <td>should run the method utils.getEventStringAsObject and mqttClient.sendEvent if ble.startNotification returns no error and message is not null</td>
        <td>bleService &raquo; startDeviceNotification(device: Device): void</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.007s</td>
        <td>should run the method utils.getEventStringAsObject but not the method mqttClient.sendEvent if ble.startNotification returns no error, but message is null</td>
        <td>bleService &raquo; startDeviceNotification(device: Device): void</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.008s</td>
        <td>should not run  method utils.getEventStringAsObject and mqttClient.sendEvent if ble.startNotification returns an error</td>
        <td>bleService &raquo; startDeviceNotification(device: Device): void</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.007s</td>
        <td>should create an instance of the DevicesService</td>
        <td>devicesService:</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.012s</td>
        <td>should convert a given BLE Device parameter to a Device</td>
        <td>devicesService: &raquo; convertBleDeviceToDevice(bleDevice: any): Promise<Device></td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.007s</td>
        <td>should convert a given BLE Device parameter to a Device, but use bleDevice.name if an error is thrown</td>
        <td>devicesService: &raquo; convertBleDeviceToDevice(bleDevice: any): Promise<Device></td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.007s</td>
        <td>should add a device to the devices-list if the list does not already contain the device parameter</td>
        <td>devicesService: &raquo; newDevice(device: Device)</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.006s</td>
        <td>should not add a device to the devices-list if the list already contains the device parameter</td>
        <td>devicesService: &raquo; newDevice(device: Device)</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.007s</td>
        <td>should change the name of the device parameter to the name parameter</td>
        <td>devicesService: &raquo; setCustomDeviceName(device: Device, name: String): void</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.007s</td>
        <td>should reset the name of the device parameter to the tileId</td>
        <td>devicesService: &raquo; resetDeviceName(device: Device): void</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.011s</td>
        <td>should remove the devices that has not been discovered for the past 60 seconds</td>
        <td>devicesService: &raquo; clearDisconnectedDevices(): void</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.015s</td>
        <td>should create an instance of the MqttClient</td>
        <td>mqttClient</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.009s</td>
        <td>should return a correct url adress for the specific device</td>
        <td>mqttClient &raquo; getDeviceSpecificTopic(deviceId: string, isEvent: boolean): string</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.007s</td>
        <td>should return a correct url adress for the specific device when no event is passed as an argument</td>
        <td>mqttClient &raquo; getDeviceSpecificTopic(deviceId: string, isEvent: boolean): string</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.006s</td>
        <td>should create a connection to the server</td>
        <td>mqttClient &raquo; connect(user: string, host: string, port: number): void</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.007s</td>
        <td>should get connection data from tilesApi if it is undefined or null</td>
        <td>mqttClient &raquo; connect(user: string, host: string, port: number): void</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.01s</td>
        <td>should end an old connection if it exists</td>
        <td>mqttClient &raquo; connect(user: string, host: string, port: number): void</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.007s</td>
        <td>should call client.on a total of 6 (six) times</td>
        <td>mqttClient &raquo; connect(user: string, host: string, port: number): void</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.007s</td>
        <td>should register a device at the server if client is defined</td>
        <td>mqttClient &raquo; registerDevice(device: Device): void</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.007s</td>
        <td>should unregister a device at the server if client is defined</td>
        <td>mqttClient &raquo; unregisterDevice(device: Device): void</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.007s</td>
        <td>should send an event if client is defined</td>
        <td>mqttClient &raquo; sendEvent(deviceId: string, event: CommandObject): void</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.007s</td>
        <td>should end the connection to the client if it is defined, and run method stopBackgroundFetch</td>
        <td>mqttClient &raquo; endConnection(deviceId: string, event: any): void</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.011s</td>
        <td>should start the BackgroundFetch</td>
        <td>mqttClient &raquo; startBackgroundFetch(): void</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.007s</td>
        <td>should stop the BackgroundFetch</td>
        <td>mqttClient &raquo; stopBackgroundFetch(): void</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.011s</td>
        <td>should create an instance of the TilesApi</td>
        <td>tilesAPI</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.007s</td>
        <td>should return true when given a valid device-input</td>
        <td>tilesAPI &raquo; isTilesDevice(device: any): boolean</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.006s</td>
        <td>should return false when given a invalid device-input</td>
        <td>tilesAPI &raquo; isTilesDevice(device: any): boolean</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.007s</td>
        <td>should set the correct login data in the beforeEach</td>
        <td>tilesAPI &raquo; setLoginData(loginData: LoginData): void</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.01s</td>
        <td>should return the correct login data</td>
        <td>tilesAPI &raquo; getLoginData(): void</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.007s</td>
        <td>should get loginData from storage if loginData is undefined</td>
        <td>tilesAPI &raquo; getLoginData(): void</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.007s</td>
        <td>should get loginData from storage if loginData is null</td>
        <td>tilesAPI &raquo; getLoginData(): void</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.007s</td>
        <td>should set the activeApp equal to the parameter</td>
        <td>tilesAPI &raquo; setActiveApp(activeApp: Application): void</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.006s</td>
        <td>should return the active app</td>
        <td>tilesAPI &raquo; getActiveApp(): Application</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.006s</td>
        <td>should return a mock application if activeApp is undefined</td>
        <td>tilesAPI &raquo; getActiveApp(): Application</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.012s</td>
        <td>should set virtualTiles equal to a list of Virtual Tiles from an application</td>
        <td>tilesAPI &raquo; setVirtualTiles(appId: string): void</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.005s</td>
        <td>should return a list of the Virtual Tiles</td>
        <td>tilesAPI &raquo; getVirtualTiles(): VirtualTile[]</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.006s</td>
        <td>should clear the list of Virtual Tiles</td>
        <td>tilesAPI &raquo; clearVirtualTiles(): void</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.009s</td>
        <td>should return true if the userName is registered in the server</td>
        <td>tilesAPI &raquo; isTilesUser(userName: string, host: string): Promise<any></td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.007s</td>
        <td>should return false if the userName is not registered in the server</td>
        <td>tilesAPI &raquo; isTilesUser(userName: string, host: string): Promise<any></td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.007s</td>
        <td>should return false if there is an error</td>
        <td>tilesAPI &raquo; isTilesUser(userName: string, host: string): Promise<any></td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.007s</td>
        <td>should return all available applications registered for all users</td>
        <td>tilesAPI &raquo; getAllApplications(): Promise<any></td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.012s</td>
        <td>should catch if there is an error</td>
        <td>tilesAPI &raquo; getAllApplications(): Promise<any></td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.006s</td>
        <td>should return an application named "test3"</td>
        <td>tilesAPI &raquo; getApplicationDetails(applicationId: string): Promise<any></td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.006s</td>
        <td>should return null if there is an error</td>
        <td>tilesAPI &raquo; getApplicationDetails(applicationId: string): Promise<any></td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.006s</td>
        <td>should return a list of three virtualTiles</td>
        <td>tilesAPI &raquo; getApplicationTiles(applicationId: string): Promise<any></td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.009s</td>
        <td>should pair a device to a virtual tile and return status code 201</td>
        <td>tilesAPI &raquo; pairDeviceToVirtualTile(deviceId: string, virtualTileId: string, applicationId: string): void</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.008s</td>
        <td>should catch if there is an error</td>
        <td>tilesAPI &raquo; pairDeviceToVirtualTile(deviceId: string, virtualTileId: string, applicationId: string): void</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.012s</td>
        <td>should create an instance of the UtilsService</td>
        <td>utilsService</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.006s</td>
        <td>should convert the string parameter to an array og bytes</td>
        <td>utilsService &raquo; convertStringToBytes(str: String): any</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.006s</td>
        <td>should return null if the method is not able to convert the string</td>
        <td>utilsService &raquo; convertStringToBytes(str: String): any</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.006s</td>
        <td>should return an object conatining the eventName and the properties of the string parameter</td>
        <td>utilsService &raquo; getEventStringAsObject(eventString: string): CommandObject</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.006s</td>
        <td>should return ´null´ if the string parameter does not contain any properties</td>
        <td>utilsService &raquo; getEventStringAsObject(eventString: string): CommandObject</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.007s</td>
        <td>should return the CommandObjects contents as a string</td>
        <td>utilsService &raquo; getCommandObjectAsString(cmdObj: CommandObject): string</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.006s</td>
        <td>should return true when passing correctly formated test-user parameters</td>
        <td>utilsService &raquo; verifyLoginCredentials(user: string, host: string, port: number): boolean</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.01s</td>
        <td>should return false when passing incorrectly formated username parameters</td>
        <td>utilsService &raquo; verifyLoginCredentials(user: string, host: string, port: number): boolean</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.005s</td>
        <td>should return false when passing incorrectly formated host parameters</td>
        <td>utilsService &raquo; verifyLoginCredentials(user: string, host: string, port: number): boolean</td>
      </tr>
      <tr class="pass">
        <td>Passed in 0.005s</td>
        <td>should return a capitalized string</td>
        <td>utilsService &raquo; capitalize(str: string): void</td>
      </tr>
    </table>
    <hr/>
  </body>
</html>